{"ast":null,"code":"import api from './api';\nexport const authService = {\n  register: async userData => {\n    const response = await api.post('/auth/register', userData);\n    if (response.data.access_token) {\n      localStorage.setItem('token', response.data.access_token);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n    }\n    return response.data;\n  },\n  login: async credentials => {\n    const response = await api.post('/auth/login', credentials);\n    if (response.data.access_token) {\n      localStorage.setItem('token', response.data.access_token);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n    }\n    return response.data;\n  },\n  logout: () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/login';\n  },\n  getCurrentUser: () => {\n    const userStr = localStorage.getItem('user');\n    return userStr ? JSON.parse(userStr) : null;\n  },\n  isAuthenticated: () => {\n    return !!localStorage.getItem('token');\n  },\n  isGuardian: () => {\n    var _user$roles;\n    const user = authService.getCurrentUser();\n    return (user === null || user === void 0 ? void 0 : (_user$roles = user.roles) === null || _user$roles === void 0 ? void 0 : _user$roles.includes('guardian')) || (user === null || user === void 0 ? void 0 : user.is_guardian);\n  }\n};","map":{"version":3,"names":["api","authService","register","userData","response","post","data","access_token","localStorage","setItem","JSON","stringify","user","login","credentials","logout","removeItem","window","location","href","getCurrentUser","userStr","getItem","parse","isAuthenticated","isGuardian","_user$roles","roles","includes","is_guardian"],"sources":["C:/transport-fairmanagement/managementSystem/frontend/src/services/auth.js"],"sourcesContent":["import api from './api';\r\n\r\nexport const authService = {\r\n  register: async (userData) => {\r\n    const response = await api.post('/auth/register', userData);\r\n    if (response.data.access_token) {\r\n      localStorage.setItem('token', response.data.access_token);\r\n      localStorage.setItem('user', JSON.stringify(response.data.user));\r\n    }\r\n    return response.data;\r\n  },\r\n\r\n  login: async (credentials) => {\r\n    const response = await api.post('/auth/login', credentials);\r\n    if (response.data.access_token) {\r\n      localStorage.setItem('token', response.data.access_token);\r\n      localStorage.setItem('user', JSON.stringify(response.data.user));\r\n    }\r\n    return response.data;\r\n  },\r\n\r\n  logout: () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    window.location.href = '/login';\r\n  },\r\n\r\n  getCurrentUser: () => {\r\n    const userStr = localStorage.getItem('user');\r\n    return userStr ? JSON.parse(userStr) : null;\r\n  },\r\n\r\n  isAuthenticated: () => {\r\n    return !!localStorage.getItem('token');\r\n  },\r\n\r\n  isGuardian: () => {\r\n    const user = authService.getCurrentUser();\r\n    return user?.roles?.includes('guardian') || user?.is_guardian;\r\n  }\r\n};\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,OAAO;AAEvB,OAAO,MAAMC,WAAW,GAAG;EACzBC,QAAQ,EAAE,MAAOC,QAAQ,IAAK;IAC5B,MAAMC,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,gBAAgB,EAAEF,QAAQ,CAAC;IAC3D,IAAIC,QAAQ,CAACE,IAAI,CAACC,YAAY,EAAE;MAC9BC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,QAAQ,CAACE,IAAI,CAACC,YAAY,CAAC;MACzDC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACP,QAAQ,CAACE,IAAI,CAACM,IAAI,CAAC,CAAC;IAClE;IACA,OAAOR,QAAQ,CAACE,IAAI;EACtB,CAAC;EAEDO,KAAK,EAAE,MAAOC,WAAW,IAAK;IAC5B,MAAMV,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,aAAa,EAAES,WAAW,CAAC;IAC3D,IAAIV,QAAQ,CAACE,IAAI,CAACC,YAAY,EAAE;MAC9BC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,QAAQ,CAACE,IAAI,CAACC,YAAY,CAAC;MACzDC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACP,QAAQ,CAACE,IAAI,CAACM,IAAI,CAAC,CAAC;IAClE;IACA,OAAOR,QAAQ,CAACE,IAAI;EACtB,CAAC;EAEDS,MAAM,EAAEA,CAAA,KAAM;IACZP,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC;IAChCR,YAAY,CAACQ,UAAU,CAAC,MAAM,CAAC;IAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACjC,CAAC;EAEDC,cAAc,EAAEA,CAAA,KAAM;IACpB,MAAMC,OAAO,GAAGb,YAAY,CAACc,OAAO,CAAC,MAAM,CAAC;IAC5C,OAAOD,OAAO,GAAGX,IAAI,CAACa,KAAK,CAACF,OAAO,CAAC,GAAG,IAAI;EAC7C,CAAC;EAEDG,eAAe,EAAEA,CAAA,KAAM;IACrB,OAAO,CAAC,CAAChB,YAAY,CAACc,OAAO,CAAC,OAAO,CAAC;EACxC,CAAC;EAEDG,UAAU,EAAEA,CAAA,KAAM;IAAA,IAAAC,WAAA;IAChB,MAAMd,IAAI,GAAGX,WAAW,CAACmB,cAAc,CAAC,CAAC;IACzC,OAAO,CAAAR,IAAI,aAAJA,IAAI,wBAAAc,WAAA,GAAJd,IAAI,CAAEe,KAAK,cAAAD,WAAA,uBAAXA,WAAA,CAAaE,QAAQ,CAAC,UAAU,CAAC,MAAIhB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEiB,WAAW;EAC/D;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}